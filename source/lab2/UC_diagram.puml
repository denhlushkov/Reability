@startuml
left to right direction
skinparam packageStyle rectangle

actor "Patient" as P
actor "Therapist" as T
actor "External Payment System" as EPS

package MedicalSystem {
    ' Core Use Cases (UC01 - UC07)
    (UC01: Book Session) as UC_BOOK
    (UC02: View Schedule) as UC_VIEW_SCHED
    (UC03: Pay Invoice) as UC_PAY
    (UC04: Manage Availability) as UC_MANAGE_T_SCHED
    (UC05: Record Patient Data) as UC_RECORD_DATA
    (UC06: Create Invoice) as UC_CREATE_INV
    (UC07: Process Transaction) as UC_PROCESS_TRANS

    ' Auxiliary Use Cases (UC08 - UC11)
    (UC08: Update Session Status) as UC_UPDATE_STATUS
    (UC09: Send Notification) as UC_NOTIFY
    (UC10: Check Availability) as UC_CHECK_AVAIL
    (UC11: Check Patient History) as UC_CHECK_HISTORY

    ' Actor Associations
    P -- UC_BOOK
    P -- UC_VIEW_SCHED
    P -- UC_PAY
    T -- UC_MANAGE_T_SCHED
    T -- UC_RECORD_DATA
    T -- UC_CREATE_INV
    EPS -- UC_PROCESS_TRANS

    ' Include/Extend Relationships

    ' UC01: Book Session
    UC_BOOK .> UC_CHECK_AVAIL : <<include>>
    UC_BOOK .> UC_NOTIFY : <<extend>>

    ' UC02: View Schedule
    UC_VIEW_SCHED .> UC_CHECK_AVAIL : <<include>> 

    ' UC03: Pay Invoice
    UC_PAY .> UC_PROCESS_TRANS : <<include>>

    ' UC04: Manage Availability
    UC_MANAGE_T_SCHED .> UC_NOTIFY : <<extend>> 

    ' UC05: Record Patient Data
    UC_RECORD_DATA .> UC_CHECK_HISTORY : <<include>>

    ' UC06: Create Invoice
    UC_CREATE_INV .> UC_UPDATE_STATUS : <<include>>
    UC_CREATE_INV .> UC_RECORD_DATA : <<extend>> 

    ' UC07: Process Transaction
    UC_PROCESS_TRANS .> UC_UPDATE_STATUS : <<include>>

    ' Interconnection of Auxiliary UCs
    UC_CHECK_AVAIL .> UC_CHECK_HISTORY : <<extend>>
    UC_UPDATE_STATUS .> UC_NOTIFY : <<include>>
}
@enduml